// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.25.0
// source: products.sql

package db

import (
	"context"
	"database/sql"
)

const addProduct = `-- name: AddProduct :execresult
INSERT INTO user_item (
    user_id, item_id, count, name, price, about, picture
) VALUES (
    ?, ?, ?, ?, ?, ?, ?
)
`

type AddProductParams struct {
	UserID  sql.NullInt64   `json:"user_id"`
	ItemID  sql.NullInt64   `json:"item_id"`
	Count   sql.NullInt64   `json:"count"`
	Name    sql.NullString  `json:"name"`
	Price   sql.NullFloat64 `json:"price"`
	About   sql.NullString  `json:"about"`
	Picture sql.NullString  `json:"picture"`
}

func (q *Queries) AddProduct(ctx context.Context, arg AddProductParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, addProduct,
		arg.UserID,
		arg.ItemID,
		arg.Count,
		arg.Name,
		arg.Price,
		arg.About,
		arg.Picture,
	)
}

const deleteProduct = `-- name: DeleteProduct :execresult
DELETE FROM user_item WHERE item_id = ? AND user_id = ?
`

type DeleteProductParams struct {
	ItemID sql.NullInt64 `json:"item_id"`
	UserID sql.NullInt64 `json:"user_id"`
}

func (q *Queries) DeleteProduct(ctx context.Context, arg DeleteProductParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, deleteProduct, arg.ItemID, arg.UserID)
}

const getAllUserProducts = `-- name: GetAllUserProducts :many
SELECT id, user_id, item_id, count, name, price, about, picture, "FOREIGN" FROM user_item
WHERE user_id = ?
`

func (q *Queries) GetAllUserProducts(ctx context.Context, userID sql.NullInt64) ([]UserItem, error) {
	rows, err := q.db.QueryContext(ctx, getAllUserProducts, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []UserItem
	for rows.Next() {
		var i UserItem
		if err := rows.Scan(
			&i.ID,
			&i.UserID,
			&i.ItemID,
			&i.Count,
			&i.Name,
			&i.Price,
			&i.About,
			&i.Picture,
			&i.FOREIGN,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateProduct = `-- name: UpdateProduct :execresult
UPDATE user_item SET count = ? WHERE user_id = ? AND item_id = ?
`

type UpdateProductParams struct {
	Count  sql.NullInt64 `json:"count"`
	UserID sql.NullInt64 `json:"user_id"`
	ItemID sql.NullInt64 `json:"item_id"`
}

func (q *Queries) UpdateProduct(ctx context.Context, arg UpdateProductParams) (sql.Result, error) {
	return q.db.ExecContext(ctx, updateProduct, arg.Count, arg.UserID, arg.ItemID)
}
